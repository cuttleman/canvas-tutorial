(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Hill=_interopRequireDefault(require("./Hill")),_CuttleController=_interopRequireDefault(require("./CuttleController")),_Sun=_interopRequireDefault(require("./Sun"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var App=function(){function e(){_classCallCheck(this,e),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.hills=[new _Hill.default("#fd6bea",.2,12),new _Hill.default("#ff59c2",.5,8),new _Hill.default("#ff4674",1.4,6)],this.cuttleController=new _CuttleController.default,this.sun=new _Sun.default,window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),requestAnimationFrame(this.animate.bind(this))}return _createClass(e,[{key:"resize",value:function(){this.stageWidth=document.body.clientWidth,this.stageHeight=document.body.clientHeight,this.canvas.width=2*this.stageWidth,this.canvas.height=2*this.stageHeight,this.ctx.scale(2,2);for(var e=0;e<this.hills.length;e++)this.hills[e].resize(this.stageWidth,this.stageHeight);this.cuttleController.resize(this.stageWidth,this.stageHeight),this.sun.resize(this.stageWidth,this.stageHeight)}},{key:"animate",value:function(e){var t;requestAnimationFrame(this.animate.bind(this)),this.ctx.clearRect(0,0,this.stageWidth,this.stageHeight),this.sun.draw(this.ctx,e);for(var i=0;i<this.hills.length;i++)t=this.hills[i].draw(this.ctx);this.cuttleController.draw(this.ctx,e,t)}}]),e}();exports.default=App,window.onload=function(){new App};

},{"./CuttleController":3,"./Hill":4,"./Sun":5}],2:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Cuttle=function(){function t(e,i){_classCallCheck(this,t),this.img=e,this.totalFrame=4,this.curFrame=0,this.imgWidth=300,this.imgHeight=300,this.cuttleWidth=100,this.cuttleHeight=100,this.cuttleWidthHalf=this.cuttleWidth/2,this.x=i+this.cuttleWidth,this.y=0,this.speed=2*Math.random()+.2,this.fps=10,this.fpsTime=1e3/this.fps}return _createClass(t,[{key:"draw",value:function(t,e,i){this.time||(this.time=e),e-this.time>this.fpsTime&&(this.time=e,this.curFrame+=1,this.curFrame===this.totalFrame&&(this.curFrame=0)),this.animate(t,i)}},{key:"animate",value:function(t,e){this.x-=this.speed;var i=this.getY(this.x,e);this.y=i.y,t.save(),t.translate(this.x,this.y),t.fillStyle="#000000",t.rotate(i.rotation),t.drawImage(this.img,this.imgWidth*this.curFrame,0,this.imgWidth,this.imgHeight,-this.cuttleWidthHalf,15-this.cuttleHeight,this.cuttleWidth,this.cuttleHeight),t.restore()}},{key:"getY",value:function(t,e){for(var i=1;i<e.length;i++)if(t>=e[i].x1&&t<=e[i].x3)return this.getY2(t,e[i]);return{y:0,rotation:0}}},{key:"getY2",value:function(t,e){for(var i=this.getPointOnQuad(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3,0),a=i.x,s=1;s<200;s++){var r=s/200;if(i=this.getPointOnQuad(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3,r),t>=a&&t<=i.x)return i;a=i.x}return i}},{key:"getQuadValue",value:function(t,e,i,a){return(1-a)*(1-a)*t+2*(1-a)*a*e+a*a*i}},{key:"getPointOnQuad",value:function(t,e,i,a,s,r,h){var n=this.quadTangent(t,i,s,h),u=this.quadTangent(e,a,r,h),l=-Math.atan2(n,u)+90*Math.PI/180;return{x:this.getQuadValue(t,i,s,h),y:this.getQuadValue(e,a,r,h),rotation:l}}},{key:"quadTangent",value:function(t,e,i,a){return 2*(1-a)*(e-t)+2*(i-e)*a}}]),t}();exports.default=Cuttle;

},{}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Cuttle=_interopRequireDefault(require("./Cuttle"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var CuttleController=function(){function e(){var t=this;_classCallCheck(this,e),this.img=new Image,this.img.onload=function(){t.loaded()},this.img.src="cuttle.png",this.items=[],this.cur=0,this.isLoaded=!1}return _createClass(e,[{key:"resize",value:function(e,t){this.stageWidth=e,this.stageHeight=t}},{key:"loaded",value:function(){this.isLoaded=!0,this.addCuttle()}},{key:"addCuttle",value:function(){this.items.push(new _Cuttle.default(this.img,this.stageWidth))}},{key:"draw",value:function(e,t,i){if(this.isLoaded){this.cur+=1,this.cur>400&&(this.cur=0,this.addCuttle());for(var s=this.items.length-1;s>=0;s--){var r=this.items[s];r.x<-r.width?this.items.splice(s,1):r.draw(e,t,i)}}}}]),e}();exports.default=CuttleController;

},{"./Cuttle":2}],4:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Hill=function(){function t(e,i,s){_classCallCheck(this,t),this.color=e,this.speed=i,this.total=s}return _createClass(t,[{key:"resize",value:function(t,e){this.stageWidth=t,this.stageHeight=e,this.points=[],this.gap=Math.ceil(this.stageWidth/(this.total-2));for(var i=0;i<this.total;i++)this.points[i]={x:i*this.gap,y:this.getY()}}},{key:"draw",value:function(t){t.fillStyle=this.color,t.beginPath();var e=this.points[0],i=e,s=[];e.x+=this.speed,e.x>-this.gap?this.points.unshift({x:-2*this.gap,y:this.getY()}):e.x>this.stageWidth+this.gap&&this.points.splice(-1),t.moveTo(e.x,e.y);for(var a=e.x,h=e.y,n=1;n<this.points.length;n++){(e=this.points[n]).x+=this.speed;var o=(i.x+e.x)/2,r=(i.y+e.y)/2;t.quadraticCurveTo(i.x,i.y,o,r),s.push({x1:a,y1:h,x2:i.x,y2:i.y,x3:o,y3:r}),i=e,a=o,h=r}return t.lineTo(i.x,i.y),t.lineTo(this.stageWidth,this.stageHeight),t.lineTo(this.points[0].x,this.stageHeight),t.fill(),s}},{key:"getY",value:function(){var t=this.stageHeight/8,e=this.stageHeight-t;return t+Math.random()*e}}]),t}();exports.default=Hill;

},{}],5:[function(require,module,exports){
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,i,e){return i&&_defineProperties(t.prototype,i),e&&_defineProperties(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Sun=function(){function t(){_classCallCheck(this,t),this.raidus=150,this.total=60,this.gap=1/this.total,this.originPos=[],this.pos=[];for(var i=0;i<this.total;i++){var e=this.getCirclePoint(this.raidus,this.gap*i);this.originPos[i]=e,this.pos[i]=e}this.fps=15,this.fpsTime=1e3/this.fps}return _createClass(t,[{key:"resize",value:function(t,i){this.stageWidth=t,this.stageHeight=i,this.x=this.stageWidth-this.raidus-140,this.y=this.raidus+100}},{key:"draw",value:function(t,i){this.time||(this.time=i),i-this.time>this.fpsTime&&(this.time=i,this.updatePoints()),t.fillStyle="#ffb200",t.beginPath();var e=this.pos[0];t.moveTo(e.x+this.x,e.y+this.y);for(var s=1;s<this.pos.length;s++){var a=this.pos[s];t.lineTo(a.x+this.x,a.y+this.y)}t.fill()}},{key:"getCirclePoint",value:function(t,i){var e=2*Math.PI*i;return{x:Math.cos(e)*t,y:Math.sin(e)*t}}},{key:"updatePoints",value:function(){for(var t=1;t<this.total;t++){var i=this.originPos[t];this.pos[t]={x:i.x+this.ranInt(5),y:i.y+this.ranInt(5)}}}},{key:"ranInt",value:function(t){return Math.random()*t}}]),t}();exports.default=Sun;

},{}],6:[function(require,module,exports){
"use strict";require("./App");

},{"./App":1}]},{},[6]);
